#cloud-config
hostname: jaidMain
users:
  - name: jaid
    ssh_authorized_keys:
      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC31Lh4glANJMUnf7Rfkz65i1KNrkC4vhM0wJmbW2U8sM/xLbRK2qYUwoSjHxK1pRFeDCyTrc77SFJdkQMok0n0W9P1Cx7QH9V16el4bmzwSg7Vig0iL+l91rzjt+e2Kn1ArAjTAE5qR1GhCCYmPpyk3zae5fRi7/c9SSnKbctmFjFw+aJuB9+0E9llkBF0+kv728qyX5dzea1BobEfH0hxOEhCvvR2NiqxM5UDPMlG2BZuYZPh+eXuBiVbJidvvPinakDiWw+mHgs47nASaHMBoh/+4zfkIprCQQJwh6SFPHchSl1zyqKPmArCbD0BrVl0AvpzmpvW+ksbCcdZAeOw9uzLZ3kjD833/75UDBEiJvuN32L9b0VNryamYQNPhmmErMNS9eL2hGGsqZBEzcgclU52I7utzn9VCHsDjrOHvzMr55j+g2UxYj6ilcs7C4RgymmeEhqvCk658A3zGYW6iaKCV0LqI5d4xMsMMfx6ml51QDgIniaGg2h0wX+n4fPplK04eUG0evQmcrVRRDpggnLYSYY5E9bbET5PCb4bz0qPdHlr7WO1AAP1zf/yDfMglBr8eQLc06r+4uoN50K9wiV0hZOMknWK5kxK/LZrU5Fsei1v0ykHqieyikTcH8q6NW/41WON/lL95MVGgp4p686MyAOpTg4F1/GIiaU5sQ== jaid.jsx#vps@gmail.com
    sudo: "ALL=(ALL) NOPASSWD: ALL"
    shell: /usr/bin/zsh
    ssh_import_id: jaidchen
power_state:
  mode: reboot
  timeout: 60
package_upgrade: true
packages:
  - build-essential
  - subversion
  - autoconf
  - libcppunit-dev
  - time
  - g++
  - gcc
  - ntp
  - libz-dev
  - comerr-dev
  - pkg-config
  - texinfo
  - cfv
  - libcurl3
  - libcurl4-openssl-dev
  - libtool
  - libssl-dev
  - libncurses5-dev
  - ncurses-term
  - libsigc++-2.0-dev
  - libcppunit-dev
  - libncursesw5-dev
  - libx264-dev
  - libnuma-dev
  - libvpx-dev
  - libmp3lame-dev
  - libopus-dev
  - libass-dev
  - x264
  - vpx-tools
  - libfreetype6-dev
  - libvorbis-dev
  - imagemagick
  - gettext
  - cmake
  - yasm
  - python3-pip
  - psmisc
  - ufw
  - htop
  - nano
  - unzip
  - fail2ban
manage_resolv_conf: true
resolv_conf:
  nameservers: ["1.1.1.1", "1.0.0.1"] # v6: 2606:4700:4700::1111 2606:4700:4700::1001
write_files:
  - path: /usr/local/bin/downloadJaidScript
    permissions: 0755
    owner: root
    content: |
      #!/usr/bin/env bash
      target="/usr/local/bin/$1"
      sudo curl --fail --silent --header "Cache-Control: no-cache" --location --retry 3 "https://raw.githubusercontent.com/Jaid/setup-server/master/commands/$1.bash" | sudo tee "$target"
      sudo chmod +x "$target"
      echo Added "$target"
runcmd:
  - locale-gen --purge de_DE.UTF-8 en_US.UTF-8
  - update-locale
  - downloadJaidScript downloadFile
  - downloadJaidScript executeDownload
  - downloadJaidScript setupUser
  - downloadJaidScript aptGet
  - downloadJaidScript gitClone
  - setupUser
